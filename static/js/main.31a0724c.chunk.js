(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{113:function(t,e,n){},116:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(33),o=n.n(a),u=n(12),i=n(19),s=(n(92),n(7)),l=n(13),d=n(1),b={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B",marginLeft:"15px"},activeLink:{color:"#1a5ef3ec"}},j=function(){var t=Object(u.c)(l.c.getIsLoggedIn);return Object(d.jsxs)("nav",{children:[Object(d.jsx)(i.b,{to:"/",exact:!0,style:b.link,activeStyle:b.activeLink,children:"Main"}),t&&Object(d.jsx)(i.b,{to:"/contacts",exact:!0,style:b.link,activeStyle:b.activeLink,children:"Contacts"})]})},f=n(9),O=n.p+"static/media/default.43901eb7.jpg",h=n(118),p=(n(81),{container:{display:"flex",alignItems:"center",marginLeft:"35px",marginRight:"35px"},avatar:{marginRight:4,borderRadius:"50%"},name:{fontWeight:700,marginRight:12}});function g(){var t=Object(u.b)(),e=Object(u.c)(l.c.getUserName),n=O;return Object(d.jsxs)("div",{style:p.container,children:[Object(d.jsx)("img",{src:n,alt:"",width:"32",style:p.avatar}),Object(d.jsxs)("span",{style:p.name,children:["Welcome, ",e]}),Object(d.jsx)(h.a,{type:"primary",shape:"default",size:"small",htmlType:"button",onClick:function(){t(l.a.logOut()),t(f.a.contactsClear())},children:"Logout"})]})}var x={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#1a5ef3ec"}};function v(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(i.b,{to:"/register",exact:!0,style:x.link,activeStyle:x.activeLink,children:"Register"}),Object(d.jsx)(i.b,{to:"/login",exact:!0,style:x.link,activeStyle:x.activeLink,children:"Login"})]})}var m=n(78),C=n.n(m);function k(){var t=Object(u.c)(l.c.getIsLoggedIn);return Object(d.jsxs)("header",{className:C.a.header,children:[Object(d.jsx)(j,{}),t?Object(d.jsx)(g,{}):Object(d.jsx)(v,{})]})}n(113);var y=n(22),L=n(48),I=["component","redirectTo","children"];function S(t){t.component;var e=t.redirectTo,n=t.children,c=Object(L.a)(t,I),r=Object(u.c)(l.c.getIsLoggedIn);return Object(d.jsx)(s.b,Object(y.a)(Object(y.a)({},c),{},{children:r?n:Object(d.jsx)(s.a,{to:e})}))}var T=["redirectTo","restricted","children"];function R(t){var e=t.redirectTo,n=void 0===e?"/":e,c=t.restricted,r=void 0!==c&&c,a=t.children,o=Object(L.a)(t,T),i=Object(u.c)(l.c.getIsLoggedIn)&&r;return Object(d.jsx)(s.b,Object(y.a)(Object(y.a)({},o),{},{children:i?Object(d.jsx)(s.a,{to:n}):a}))}var A=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,238))})),w=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,239))})),E=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,240))})),q=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,244))}));var W,z,U,F=function(){var t=Object(u.b)();return Object(c.useEffect)((function(){t(l.a.fetchCurrentUser())}),[t]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(k,{}),Object(d.jsx)(s.d,{children:Object(d.jsxs)(c.Suspense,{fallback:Object(d.jsx)("h2",{children:" Loading..."}),children:[Object(d.jsx)(R,{exact:!0,path:"/",children:Object(d.jsx)(A,{})}),Object(d.jsx)(R,{path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(d.jsx)(w,{})}),Object(d.jsx)(R,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(d.jsx)(E,{})}),Object(d.jsx)(S,{path:"/contacts",redirectTo:"/login",children:Object(d.jsx)(q,{})})]})})]})},B=function(t){t&&t instanceof Function&&n.e(8).then(n.bind(null,241)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),a(t),o(t)}))},P=n(47),V=n(6),D=n(4),N=n(10),_=f.a.fetchContactRequest,J=f.a.fetchContactSuccess,M=f.a.fetchContactError,Y=f.a.addContactRequest,G=f.a.addContactSuccess,H=f.a.addContactError,K=f.a.deleteContactRequest,Q=f.a.deleteContactSuccess,X=f.a.deleteContactError,Z=f.a.updateContactRequest,$=f.a.updateContactSuccess,tt=f.a.updateContactError,et=f.a.changeFilter,nt=f.a.contactsClear,ct=Object(V.d)([],(W={},Object(D.a)(W,J,(function(t,e){return e.payload})),Object(D.a)(W,G,(function(t,e){var n=e.payload;return[].concat(Object(P.a)(t),[n])})),Object(D.a)(W,$,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?Object(y.a)(Object(y.a)({},t),{},{number:n.number}):t}))})),Object(D.a)(W,Q,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(D.a)(W,nt,(function(t){return[]})),W)),rt=Object(V.d)(!1,(z={},Object(D.a)(z,_,(function(){return!0})),Object(D.a)(z,J,(function(){return!1})),Object(D.a)(z,M,(function(){return!1})),Object(D.a)(z,Y,(function(){return!0})),Object(D.a)(z,G,(function(){return!1})),Object(D.a)(z,H,(function(){return!1})),Object(D.a)(z,K,(function(){return!0})),Object(D.a)(z,Q,(function(){return!1})),Object(D.a)(z,X,(function(){return!1})),Object(D.a)(z,Z,(function(){return!0})),Object(D.a)(z,$,(function(){return!1})),Object(D.a)(z,tt,(function(){return!1})),z)),at=Object(V.d)(null,(U={},Object(D.a)(U,M,(function(t,e){return e.payload})),Object(D.a)(U,H,(function(t,e){return e.payload})),Object(D.a)(U,tt,(function(t,e){return e.payload})),Object(D.a)(U,X,(function(t,e){return e.payload})),Object(D.a)(U,_,(function(){return null})),Object(D.a)(U,Y,(function(){return null})),Object(D.a)(U,Z,(function(){return null})),Object(D.a)(U,K,(function(){return null})),U)),ot=Object(V.d)("",Object(D.a)({},et,(function(t,e){return e.payload}))),ut=Object(N.b)({items:ct,loading:rt,error:at,filter:ot}),it=n(24),st=n(79),lt={key:"auth",storage:n.n(st).a,whitelist:["token"]},dt=Object(P.a)(Object(V.f)({serializableCheck:{ignoredActions:[it.a,it.f,it.b,it.c,it.d,it.e]}})),bt=Object(V.a)({reducer:{auth:Object(it.g)(lt,l.b),contacts:ut},middleware:dt,devTools:!1}),jt={store:bt,persistor:Object(it.h)(bt)},ft=n(80);o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(u.a,{store:jt.store,children:Object(d.jsx)(ft.a,{loading:Object(d.jsx)("h2",{children:"Data upload from LocalStorage..."}),persistor:jt.persistor,children:Object(d.jsx)(i.a,{children:Object(d.jsx)(F,{})})})})}),document.getElementById("root")),B()},13:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return O})),n.d(e,"c",(function(){return p}));var c=n(4),r=n(6),a=n(23),o=n.n(a),u=n(40),i=n(28),s=n.n(i);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var l,d=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){s.a.defaults.headers.common.Authorization=""},j=Object(r.c)("auth/register",function(){var t=Object(u.a)(o.a.mark((function t(e,n){var c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/signup",e);case 3:return c=t.sent,r=c.data,d(r.token),t.abrupt("return",r);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(r.c)("auth/login",function(){var t=Object(u.a)(o.a.mark((function t(e,n){var c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/login",e);case 3:return c=t.sent,r=c.data,d(r.token),t.abrupt("return",r);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()),O={register:j,logOut:Object(r.c)("auth/logout",function(){var t=Object(u.a)(o.a.mark((function t(e,n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/logout");case 3:b(),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:f,fetchCurrentUser:Object(r.c)("auth/refresh",function(){var t=Object(u.a)(o.a.mark((function t(e,n){var c,r,a,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(r=c.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue("Token missing"));case 4:return d(r),t.prev=5,t.next=8,s.a.get("/users/current");case 8:return a=t.sent,u=a.data,t.abrupt("return",u);case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",n.rejectWithValue(t.t0.message));case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},h=Object(r.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isLoadingToken:!0,errorAuth:null},extraReducers:(l={},Object(c.a)(l,O.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0,t.isLoadingToken=!1})),Object(c.a)(l,O.register.rejected,(function(t,e){t.errorAuth=e.payload})),Object(c.a)(l,O.register.pending,(function(t,e){t.errorAuth=null})),Object(c.a)(l,O.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0,t.isLoadingToken=!1})),Object(c.a)(l,O.logIn.rejected,(function(t,e){t.errorAuth=e.payload})),Object(c.a)(l,O.logIn.pending,(function(t,e){t.errorAuth=null})),Object(c.a)(l,O.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1,t.isLoadingToken=!1})),Object(c.a)(l,O.logOut.rejected,(function(t,e){t.errorAuth=e.payload})),Object(c.a)(l,O.logOut.pending,(function(t,e){t.errorAuth=null})),Object(c.a)(l,O.fetchCurrentUser.pending,(function(t){t.isLoadingToken=!0})),Object(c.a)(l,O.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isLoadingToken=!1})),Object(c.a)(l,O.fetchCurrentUser.rejected,(function(t){t.isLoadingToken=!1})),l)}).reducer,p={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUserName:function(t){return t.auth.user.name},getIsLoadingToken:function(t){return t.auth.isLoadingToken},getErrorAuth:function(t){return t.auth.errorAuth}}},78:function(t,e,n){t.exports={header:"AppBar_header__2PSoY"}},9:function(t,e,n){"use strict";var c=n(6),r={fetchContactRequest:Object(c.b)("contact/fetchContactRequest"),fetchContactSuccess:Object(c.b)("contact/fetchContactSuccess"),fetchContactError:Object(c.b)("contact/fetchContactError"),addContactRequest:Object(c.b)("contact/addContactRequest"),addContactSuccess:Object(c.b)("contact/addContactSuccess"),addContactError:Object(c.b)("contact/addContactError"),updateContactRequest:Object(c.b)("contact/updateContactRequest"),updateContactSuccess:Object(c.b)("contact/updateContactSuccess"),updateContactError:Object(c.b)("contact/updateContactError"),deleteContactRequest:Object(c.b)("contact/deleteContactRequest"),deleteContactSuccess:Object(c.b)("contact/deleteContactSuccess"),deleteContactError:Object(c.b)("contact/deleteContactError"),changeFilter:Object(c.b)("contact/changeFilter"),contactsClear:Object(c.b)("contacts/clear")};e.a=r},92:function(t,e,n){}},[[116,2,3]]]);
//# sourceMappingURL=main.31a0724c.chunk.js.map